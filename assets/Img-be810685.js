import{r as A,a as I}from"./index-e6a893fc.js";function l(e){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l(e)}function K(e,r){if(l(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r||"default");if(l(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function x(e){var r=K(e,"string");return l(r)==="symbol"?r:String(r)}function w(e,r,n){return r=x(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function F(e,r){if(e==null)return{};var n={},t=Object.keys(e),o,s;for(s=0;s<t.length;s++)o=t[s],!(r.indexOf(o)>=0)&&(n[o]=e[o]);return n}var $=function(e){var r=e.decode,n=r===void 0?!0:r,t=e.crossOrigin,o=t===void 0?"":t;return function(s){return new Promise(function(f,a){var c=new Image;o&&(c.crossOrigin=o),c.onload=function(){n&&c.decode?c.decode().then(f).catch(a):f()},c.onerror=a,c.src=s})}};function S(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,t)}return n}function p(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?S(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=function(r){return r.filter(function(n){return n})},T=function(r){return Array.isArray(r)?r:[r]},u={},q=function(r,n){var t=!1;return new Promise(function(o,s){var f=function(c){return n(c).then(function(){t=!0,o(c)})};r.reduce(function(a,c){return a.catch(function(){if(!t)return f(c)})},f(r.shift())).catch(s)})};function B(e){var r=e.srcList,n=e.imgPromise,t=n===void 0?$({decode:!0}):n,o=e.useSuspense,s=o===void 0?!0:o,f=A.useState(!1),a=f[1],c=N(T(r)),i=c.join("");if(u[i]||(u[i]={promise:q(c,t),cache:"pending",error:null}),u[i].cache==="resolved")return{src:u[i].src,isLoading:!1,error:null};if(u[i].cache==="rejected"){if(s)throw u[i].error;return{isLoading:!1,error:u[i].error,src:void 0}}if(u[i].promise.then(function(d){u[i]=p(p({},u[i]),{},{cache:"resolved",src:d}),s||a(i)}).catch(function(d){u[i]=p(p({},u[i]),{},{cache:"rejected",error:d}),s||a(i)}),s)throw u[i].promise;return{isLoading:!0,src:void 0,error:null}}var k=["decode","src","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","crossorigin","useSuspense"];function j(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,t)}return n}function R(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?j(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(r){return r};function z(e){var r=e.decode,n=r===void 0?!0:r,t=e.src,o=t===void 0?[]:t,s=e.loader,f=s===void 0?null:s,a=e.unloader,c=a===void 0?null:a,i=e.container,d=i===void 0?v:i,y=e.loaderContainer,L=y===void 0?v:y,O=e.unloaderContainer,C=O===void 0?v:O,m=e.imgPromise,E=e.crossorigin,b=e.useSuspense,g=b===void 0?!1:b,_=F(e,k);m=m||$({decode:n,crossOrigin:E});var P=B({srcList:o,imgPromise:m,useSuspense:g}),h=P.src,D=P.isLoading;return h?d(I.createElement("img",R({src:h},_))):!g&&D?L(f):!g&&c?C(c):null}export{z as I};
